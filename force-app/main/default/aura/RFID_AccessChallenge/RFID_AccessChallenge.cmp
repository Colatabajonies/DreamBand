<aura:component implements="force:appHostable" controller="RFID_AccessChallenge_ctrl">
    
    <aura:handler name="init" value="{!this}" action="{!c.onInit}" />
    
    <aura:attribute name="Spinner" type="boolean" default="true"/>
    <aura:attribute name="access" type="boolean" default="false"/>
    <aura:attribute name="rFID" type="String" default=""/>
    <aura:attribute name="objAccount" type="Account"/>
    <aura:attribute name="noimageURL" type="string" default="../../_slds/images/themes/lightning_blue/lightning_blue_profile_avatar_200.png" />
    
    
    <div style="width:100%;text-align:center;padding-top:20px;padding-bottom:20px;padding-left:10px;padding-right:10px;">
        <aura:if isTrue="{!v.Spinner}">
            
            <div aura:id="spinnerId" class="slds-spinner_container">
                <div class="slds-spinner--brand  slds-spinner slds-spinner--large slds-is-relative" role="alert">
                    <span class="slds-assistive-text">Loading</span>
                    <div class="slds-spinner__dot-a"></div>
                    <div class="slds-spinner__dot-b"></div>
                </div>
            </div>
        </aura:if>
        
        <div class="slds-p-bottom_large slds-p-left_large slds-p-right_large" style="{!v.access ? 'min-height:500px;background-color:#59C3B7' : 'min-height:500px;' + (v.rFID =='' ? 'background-color:#fff;' : 'background-color:#DF7569')}">
            <div style="{!v.objAccount ? 'display:none' : (v.rFID == '' ? 'display:none' : 'padding-top:15px;')}">
                <lightning:icon iconName="action:close" alternativeText="Denied" title="Denied" size="large" />
                <div style="font-size:2rem;color:white;padding-top:10px;">
                    Attendee not found
                </div>
                <img src="{!v.noimageURL}" alt="error" style="width:160px;border-radius:20px;border-color:#469AD4;border-width:3px;border-style:solid;margin:10px;"/>
            </div>
            <div style="{!v.objAccount ? '' : 'display:none'}">
                <div style="{!v.access ? 'display:none' : 'padding-top:15px;'}">
                    <lightning:icon iconName="action:close" alternativeText="Denied" title="Denied" size="large" />
                    <div style="font-size:2rem;color:white;padding-top:10px;">
                        Access Denied
                    </div>
                </div>
                <div style="{!v.access ? 'padding-top:15px;' : 'display:none'}">
                    <lightning:icon iconName="action:approval" alternativeText="Granted" title="Granted" size="large" />
                    <div style="font-size:2rem;color:white;padding-top:10px;">
                        Access Granted
                    </div>
                </div>
                
                <img src="{!v.objAccount.PhotoURL__c == '' || !v.objAccount.PhotoURL__c ? v.noimageURL : v.objAccount.PhotoURL__c}" alt="{!v.objAccount.Name}" style="width:160px;border-radius:20px;border-color:#469AD4;border-width:3px;border-style:solid;margin:10px;"/>
                <lightning:recordViewForm recordId="{!v.objAccount.Id}" objectApiName="Account">
                    <lightning:outputField fieldName="Name" />
                    <lightning:outputField fieldName="CompanyName__c" />
                    <lightning:outputField fieldName="PersonEmail" />
                </lightning:recordViewForm>
            </div>
        </div>
        <div style="width:20%;text-align:center;display:inline-block;padding-top:10px;">
            <c:RFIDReader RFIDReadEvent="{!c.handleRFID}"/>
        </div>
        
        
        
    </div>
</aura:component>